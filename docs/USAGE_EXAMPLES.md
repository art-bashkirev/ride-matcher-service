# Usage Examples

## Basic Usage

### Step 1: Configure Stations (One-time Setup)

```text
User: /setstations

Bot: üöÇ –ú–∞—Å—Ç–µ—Ä –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å—Ç–∞–Ω—Ü–∏–π
     üè† –®–∞–≥ 1: –ë–∞–∑–æ–≤–∞—è —Å—Ç–∞–Ω—Ü–∏—è
     
     –î–∞–≤–∞–π—Ç–µ –Ω–∞—Å—Ç—Ä–æ–∏–º –≤–∞—à—É –±–∞–∑–æ–≤—É—é —Å—Ç–∞–Ω—Ü–∏—é (–º–µ—Å—Ç–æ –Ω–∞—á–∞–ª–∞ –ø–æ–µ–∑–¥–∫–∏).
     
     üí° –ö–∞–∫ –≤–≤–æ–¥–∏—Ç—å:
     ‚Ä¢ –ù–∞–∑–≤–∞–Ω–∏–µ —Å—Ç–∞–Ω—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–ú–æ—Å–∫–≤–∞-–ü–∞—Å—Å–∞–∂–∏—Ä—Å–∫–∞—è")
     ‚Ä¢ –ö–æ–¥ —Å—Ç–∞–Ω—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "s1234567")
     
     –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∏–ª–∏ –∫–æ–¥ –≤–∞—à–µ–π –±–∞–∑–æ–≤–æ–π —Å—Ç–∞–Ω—Ü–∏–∏:

User: Podolsk

Bot: –ù–∞–π–¥–µ–Ω–æ 3 —Å—Ç–∞–Ω—Ü–∏–π. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à—É –±–∞–∑–æ–≤—É—é —Å—Ç–∞–Ω—Ü–∏—é:
     [Buttons with station options]

User: [Selects Podolsk - s9600731]

Bot: ‚úÖ –ë–∞–∑–æ–≤–∞—è —Å—Ç–∞–Ω—Ü–∏—è —É—Å–ø–µ—à–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞!
     üéØ –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥: –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ —Å—Ç–∞–Ω—Ü–∏—é –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è

User: Tsaritsyno

Bot: [Shows confirmation]
     ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å—Ç–∞–Ω—Ü–∏–π
     ...

User: [Confirms]

Bot: üéâ –°—Ç–∞–Ω—Ü–∏–∏ —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!
```

---

### Step 2: Search for Rides

#### Scenario A: Going to Work/Destination

```text
User: /goto

Bot: ‚ùì –ö–æ–≥–¥–∞ –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø—Ä–∏–±—ã—Ç—å –≤ Tsaritsyno?

User: 08:30-09:00

Bot: ‚è≥ –ò—â—É –ø–æ–µ–∑–¥–∞ –∏ –ø–æ–ø—É—Ç—á–∏–∫–æ–≤ –¥–ª—è –ø—Ä–∏–±—ã—Ç–∏—è –≤ Tsaritsyno –º–µ–∂–¥—É 08:30 –∏ 09:00...

Bot: ‚úÖ –ü–æ–∏—Å–∫ –∑–∞–≤–µ—Ä—à–µ–Ω!
     –ù–∞–π–¥–µ–Ω–æ 8 –ø–æ–µ–∑–¥–æ–≤ –¥–ª—è –ø—Ä–∏–±—ã—Ç–∏—è –º–µ–∂–¥—É 08:30 –∏ 09:00.
     
     –ü–æ–∫–∞ –ø–æ–ø—É—Ç—á–∏–∫–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ. –ú—ã —É–≤–µ–¥–æ–º–∏–º –≤–∞—Å, –∫–æ–≥–¥–∞ –∫—Ç–æ-—Ç–æ –Ω–∞–π–¥–µ—Ç—Å—è!
```

#### Scenario B: Finding Matches

```text
User: /goto

Bot: ‚ùì –ö–æ–≥–¥–∞ –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø—Ä–∏–±—ã—Ç—å –≤ Tsaritsyno?

User: 08:30-09:00

Bot: ‚è≥ –ò—â—É –ø–æ–µ–∑–¥–∞ –∏ –ø–æ–ø—É—Ç—á–∏–∫–æ–≤ –¥–ª—è –ø—Ä–∏–±—ã—Ç–∏—è –≤ Tsaritsyno –º–µ–∂–¥—É 08:30 –∏ 09:00...

Bot: ‚úÖ –ü–æ–∏—Å–∫ –∑–∞–≤–µ—Ä—à–µ–Ω!
     –ù–∞–π–¥–µ–Ω–æ 8 –ø–æ–µ–∑–¥–æ–≤ –¥–ª—è –ø—Ä–∏–±—ã—Ç–∏—è –º–µ–∂–¥—É 08:30 –∏ 09:00.
     
     üéâ –ù–∞–π–¥–µ–Ω—ã –ø–æ–ø—É—Ç—á–∏–∫–∏!
     
     üöÇ –ü–æ–µ–∑–¥: RU_723Y_... (–æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: 08:45)
     üë§ Ivan Petrov (Silikatnaya ‚Üí Tsaritsyno)
     üë§ Maria Ivanova (Podolsk ‚Üí Tekstilschiki)
     
     üöÇ –ü–æ–µ–∑–¥: RU_823Y_... (–æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: 09:15)
     üë§ Alexey Sidorov (Shcherbinka ‚Üí Tsaritsyno)
```

#### Scenario C: Going Back Home

```text
User: /goback

Bot: ‚ùì –ö–æ–≥–¥–∞ –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø—Ä–∏–±—ã—Ç—å –≤ Podolsk?

User: 19:00

Bot: ‚è≥ –ò—â—É –ø–æ–µ–∑–¥–∞ –∏ –ø–æ–ø—É—Ç—á–∏–∫–æ–≤ –¥–ª—è –ø—Ä–∏–±—ã—Ç–∏—è –≤ Podolsk –º–µ–∂–¥—É 18:45 –∏ 19:15...

Bot: ‚úÖ –ü–æ–∏—Å–∫ –∑–∞–≤–µ—Ä—à–µ–Ω!
     –ù–∞–π–¥–µ–Ω–æ 6 –ø–æ–µ–∑–¥–æ–≤ –¥–ª—è –ø—Ä–∏–±—ã—Ç–∏—è –º–µ–∂–¥—É 18:45 –∏ 19:15.
     
     üéâ –ù–∞–π–¥–µ–Ω—ã –ø–æ–ø—É—Ç—á–∏–∫–∏!
     
     üöÇ –ü–æ–µ–∑–¥: RU_724Y_... (–æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: 18:30)
     üë§ Dmitry Kozlov (Tekstilschiki ‚Üí Podolsk)
```

---

### Step 3: Cancel Search (Optional)

```text
User: /cancelride

Bot: ‚úÖ –í–∞—à –ø–æ–∏—Å–∫ –ø–æ–ø—É—Ç—á–∏–∫–æ–≤ –æ—Ç–º–µ–Ω–µ–Ω.
```

Or if no active search:

```text
User: /cancelride

Bot: –£ –≤–∞—Å –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–∏—Å–∫–æ–≤ –ø–æ–ø—É—Ç—á–∏–∫–æ–≤.
```

---

## Real-World Scenarios

### Scenario 1: Morning Commute

**8:00 AM - Alice searches**

```text
Alice: /goto
Bot: Found 12 trains, no matches yet
```

**8:05 AM - Bob searches**

```text
Bob: /goto
Bot: Found 10 trains
     üéâ Match: Train at 08:45 with Alice!
```

**8:10 AM - Charlie searches**

```text
Charlie: /goto
Bot: Found 11 trains
     üéâ Matches:
     - Train at 08:45 with Alice & Bob
     - Train at 09:15 with Diana
```

Now Alice and Bob see Charlie when they search again!

---

### Scenario 2: Evening Commute (Reverse Direction)

**17:00 PM - Users search to go home**

```text
Alice: /goback    (Tsaritsyno ‚Üí Podolsk)
Bob: /goback      (Tsaritsyno ‚Üí Silikatnaya)
Charlie: /goback  (Tekstilschiki ‚Üí Podolsk)
```

Even though they have different stations, they match on trains that serve all their routes!

---

### Scenario 3: Cancellation

**8:00 AM - Alice searches**

```text
Alice: /goto
Bot: Found 10 trains, matches with Bob & Charlie on train at 08:45
```

**8:15 AM - Bob cancels**

```text
Bob: /cancelride
Bot: Search cancelled
```

**8:20 AM - Alice searches again**

```text
Alice: /goto
Bot: Found 10 trains, matches with Charlie on train at 08:45
     (Bob no longer shown - he cancelled)
```

---

### Scenario 4: Automatic Expiration

**8:00 AM - Alice searches**

```text
Alice: /goto
Bot: Stored search with TTL until 60 minutes after the requested arrival window
```

**10:30 AM - TTL expires**

```text
MongoDB automatically deletes Alice's search
Alice no longer appears in other users' matches
```

**10:35 AM - Bob searches**

```text
Bob: /goto
Bot: Found matches, but Alice not included (her search expired)
```

---

## Edge Cases

### Case 1: No Stations Configured

```text
User: /goto
Bot: ‚ö†Ô∏è –°–Ω–∞—á–∞–ª–∞ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å—Ç–∞–Ω—Ü–∏–∏ —Å –ø–æ–º–æ—â—å—é /setstations!
```

### Case 2: No Trains in Time Window

```text
User: /goto
Bot: ‚ùì –ö–æ–≥–¥–∞ –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø—Ä–∏–±—ã—Ç—å –≤ Tsaritsyno?
User: 05:00
Bot: ‚è≥ –ò—â—É –ø–æ–µ–∑–¥–∞ –∏ –ø–æ–ø—É—Ç—á–∏–∫–æ–≤ –¥–ª—è –ø—Ä–∏–±—ã—Ç–∏—è –≤ Tsaritsyno –º–µ–∂–¥—É 04:45 –∏ 05:15...
Bot: ‚ùå –ü–æ–µ–∑–¥–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ –¥–ª—è –ø—Ä–∏–±—ã—Ç–∏—è –º–µ–∂–¥—É 04:45 –∏ 05:15.
```

### Case 3: API Error

```text
User: /goto
Bot: ‚ùì –ö–æ–≥–¥–∞ –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø—Ä–∏–±—ã—Ç—å –≤ Tsaritsyno?
User: 08:00
Bot: ‚è≥ –ò—â—É –ø–æ–µ–∑–¥–∞ –∏ –ø–æ–ø—É—Ç—á–∏–∫–æ–≤ –¥–ª—è –ø—Ä–∏–±—ã—Ç–∏—è –≤ Tsaritsyno –º–µ–∂–¥—É 07:45 –∏ 08:15...
Bot: ‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø–æ–∏—Å–∫. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.
```

---

## Command Reference

### /goto
**Purpose**: Search for trains from your base station to destination  
**Arrival Window**: Whatever time or range you request (e.g. 08:30-09:00)  
**Caching**: Uses cached schedule data when available  
**Matching**: Finds other users with same train threads  
**Storage**: Saves results until shortly after the requested arrival window  

### /goback
**Purpose**: Search for trains from your destination back to base (reverse)  
**Arrival Window**: Whatever time or range you request for getting back home  
**Caching**: Uses cached schedule data when available  
**Matching**: Finds other users with same train threads  
**Storage**: Saves results until shortly after the requested arrival window  

### /cancelride
**Purpose**: Cancel your active ride search  
**Effect**: Removes you from matching pool immediately  
**Note**: Other users won't see you in their matches anymore  

---

## Tips

1. **Search Multiple Times:**
     - Search periodically to see new matches
     - Other users may join after your initial search

2. **Use Both Directions:**
     - Use `/goto` when heading out
     - Use `/goback` when planning the return trip

3. **Plan Ahead:**
     - Provide the arrival window you actually need
     - Try wider ranges (e.g. `08:20-08:50`) to see more options

4. **Cancel When Plans Change:**
     - Use `/cancelride` if your plans change
     - Prevents other users from seeing outdated matches

5. **Check Your Profile:**
     - Use `/profile` to verify your stations
     - Update with `/setstations` if needed

---

## Troubleshooting

**Q: Why don't I see any matches?**  
A: No other users have a matching train within your requested arrival window yet.

**Q: Can I match with users going to different destinations?**  
A: Yes! The system matches by train thread, not destination. If two users take the same physical train (even to different stops), they'll match.

**Q: How long do matches last?**  
A: Matches stay active until shortly after the requested arrival window finishes.

**Q: Can I search for multiple time windows?**  
A: Each search replaces your previous search. Provide the arrival window you care about each time.

**Q: What if I need to change my stations?**  
A: Currently, station updates are restricted after initial setup. Contact an admin for changes.
